name: Metrics JSON

on:
  schedule: [{ cron: "0 0 * * 0" }]
  workflow_dispatch:

permissions:
  contents: write

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - uses: lowlighter/metrics@v3.34
        with:
          token: ${{ github.token }}                     # uses GITHUB_TOKEN
          user: shelbeely
          template: terminal
          base: header, activity, community, repositories, metadata
          config_timezone: America/Los_Angeles
          config_output: json                            # ðŸ‘ˆ real JSON
          filename: metrics.json
          output_action: commit
          plugin_activity: no                            # ðŸ‘ˆ avoid the current crash
          plugin_languages: yes
